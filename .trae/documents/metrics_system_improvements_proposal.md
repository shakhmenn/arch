  # –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã –º–µ—Ç—Ä–∏–∫ TaskFlow Club
## –ê–Ω–∞–ª–∏–∑ –∏ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —É–¥–æ–±—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–î–∞—Ç–∞:** –Ø–Ω–≤–∞—Ä—å 2025  
**–°—Ç–∞—Ç—É—Å:** –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏  
**–ê–≤—Ç–æ—Ä:** –ö–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ TaskFlow Club

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π

### üéØ –¢—Ä–∏ –∫–ª—é—á–µ–≤—ã—Ö —É–ª—É—á—à–µ–Ω–∏—è:
1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–∏–π** - —á–µ—Ç–∫–æ–µ —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –æ—à–∏–±–æ–∫ –∏ –≤–≤–æ–¥–∞ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
2. **–£–¥–æ–±–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π** - –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–µ—Ç—Ä–∏–∫
3. **–£–ø—Ä–æ—â–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤** - –∑–∞–º–µ–Ω–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –¥–∞—Ç –Ω–∞ –ø—Ä–æ—Å—Ç–æ–π –≤—ã–±–æ—Ä –º–µ—Å—è—Ü–∞ –∏–ª–∏ –æ–¥–Ω–æ–π –¥–∞—Ç—ã

### üí° –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- –°–Ω–∏–∂–µ–Ω–∏–µ –ø—É—Ç–∞–Ω–∏—Ü—ã –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –Ω–∞ 70%
- –£—Å–∫–æ—Ä–µ–Ω–∏–µ –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö –≤ 2 —Ä–∞–∑–∞
- –£–ª—É—á—à–µ–Ω–∏–µ –∞—É–¥–∏—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

---

## 1. üîÑ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –æ—à–∏–±–æ–∫ –∏ –≤–≤–æ–¥–∞ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 1.1 –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞

**–°–µ–π—á–∞—Å:** –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ –æ–¥–Ω—É —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –ø–æ–ª–µ–º "–ü—Ä–∏—á–∏–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è".

```typescript
// –¢–µ–∫—É—â–∞—è —Å—Ö–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
const editMetricSchema = z.object({
  value: z.number().min(0),
  targetValue: z.number().min(0),
  notes: z.string().optional(),
  changeReason: z.string().min(1, '–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –∏–∑–º–µ–Ω–µ–Ω–∏—è'), // –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!
});
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç, –∫–æ–≥–¥–∞ —ç—Ç–æ "–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏", –∞ –∫–æ–≥–¥–∞ "–Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ"
- –û–¥–∏–Ω–∞–∫–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏–∑-–∑–∞ —Å–º–µ—à–∞–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 1.2 –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ

#### A) –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

```sql
-- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã MetricHistory
ALTER TABLE metric_history ADD COLUMN change_type VARCHAR(20) DEFAULT 'UPDATE';

-- –ù–æ–≤—ã–π enum –¥–ª—è —Ç–∏–ø–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–∏–π
CREATE TYPE MetricChangeType AS ENUM (
  'CORRECTION',    -- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏
  'UPDATE',        -- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
  'REVISION'       -- –ü–µ—Ä–µ—Å–º–æ—Ç—Ä —Ü–µ–ª–µ–π
);
```

#### B) –û–±–Ω–æ–≤–∏—Ç—å TypeScript —Ç–∏–ø—ã

```typescript
export enum MetricChangeType {
  CORRECTION = 'CORRECTION',  // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏
  UPDATE = 'UPDATE',          // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö  
  REVISION = 'REVISION'       // –ü–µ—Ä–µ—Å–º–æ—Ç—Ä —Ü–µ–ª–µ–π
}

export interface UpdateMetricValueDto {
  value?: number;
  targetValue?: number;
  notes?: string;
  changeType: MetricChangeType;  // –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —Ç–∏–ø
  changeReason?: string;         // –¢–µ–ø–µ—Ä—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π
}

export interface MetricHistory {
  id: number;
  oldValue?: number;
  newValue?: number;
  oldTarget?: number;
  newTarget?: number;
  changeType: MetricChangeType;  // –ù–æ–≤–æ–µ –ø–æ–ª–µ
  changeReason?: string;
  changedAt: string;
  userId: number;
  metricValueId: number;
}
```

#### C) –ù–æ–≤—ã–π UI —Å –≤—ã–±–æ—Ä–æ–º —Ç–∏–ø–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è

```typescript
// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
const ChangeTypeSelector: React.FC<{
  value: MetricChangeType;
  onChange: (type: MetricChangeType) => void;
}> = ({ value, onChange }) => {
  const changeTypes = [
    {
      type: MetricChangeType.CORRECTION,
      title: 'üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏',
      description: '–ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–≤–µ—Ä–Ω–æ –≤–≤–µ–¥–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ',
      color: 'bg-red-50 border-red-200 text-red-800'
    },
    {
      type: MetricChangeType.UPDATE,
      title: 'üìä –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö',
      description: '–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ',
      color: 'bg-blue-50 border-blue-200 text-blue-800'
    },
    {
      type: MetricChangeType.REVISION,
      title: 'üéØ –ü–µ—Ä–µ—Å–º–æ—Ç—Ä —Ü–µ–ª–µ–π',
      description: '–ò–∑–º–µ–Ω–∏—Ç—å –ø–ª–∞–Ω–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏',
      color: 'bg-green-50 border-green-200 text-green-800'
    }
  ];

  return (
    <div className="space-y-3">
      <Label>–¢–∏–ø –∏–∑–º–µ–Ω–µ–Ω–∏—è</Label>
      <div className="grid grid-cols-1 gap-3">
        {changeTypes.map((item) => (
          <div
            key={item.type}
            className={`p-4 rounded-lg border-2 cursor-pointer transition-all ${
              value === item.type 
                ? item.color + ' border-opacity-100' 
                : 'bg-gray-50 border-gray-200 hover:bg-gray-100'
            }`}
            onClick={() => onChange(item.type)}
          >
            <div className="flex items-start gap-3">
              <input
                type="radio"
                checked={value === item.type}
                onChange={() => onChange(item.type)}
                className="mt-1"
              />
              <div>
                <h4 className="font-medium">{item.title}</h4>
                <p className="text-sm text-gray-600 mt-1">{item.description}</p>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  );
};
```

#### D) –£—Å–ª–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –ø–æ–ª–µ–π

```typescript
// –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
const EditMetricForm: React.FC = () => {
  const [changeType, setChangeType] = useState<MetricChangeType>(MetricChangeType.UPDATE);
  
  // –£—Å–ª–æ–≤–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞
  const getValidationSchema = (type: MetricChangeType) => {
    const baseSchema = z.object({
      value: z.number().min(0),
      targetValue: z.number().min(0),
      changeType: z.nativeEnum(MetricChangeType),
    });

    switch (type) {
      case MetricChangeType.CORRECTION:
        return baseSchema.extend({
          changeReason: z.string().min(1, '–û–ø–∏—à–∏—Ç–µ, –∫–∞–∫—É—é –æ—à–∏–±–∫—É –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç–µ'),
        });
      case MetricChangeType.REVISION:
        return baseSchema.extend({
          changeReason: z.string().min(1, '–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–∞ —Ü–µ–ª–µ–π'),
        });
      default:
        return baseSchema.extend({
          changeReason: z.string().optional(),
        });
    }
  };

  return (
    <form>
      <ChangeTypeSelector value={changeType} onChange={setChangeType} />
      
      {/* –£—Å–ª–æ–≤–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª–µ–π */}
      {changeType === MetricChangeType.CORRECTION && (
        <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-4">
          <div className="flex items-center gap-2 mb-2">
            <AlertTriangle className="w-4 h-4 text-yellow-600" />
            <span className="font-medium text-yellow-800">–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏</span>
          </div>
          <p className="text-sm text-yellow-700">
            –≠—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –±—É–¥–µ—Ç –ø–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–µ –ø–æ–≤–ª–∏—è–µ—Ç –Ω–∞ —Ç—Ä–µ–Ω–¥–æ–≤—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É.
          </p>
        </div>
      )}
      
      {/* –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è —Ñ–æ—Ä–º—ã */}
    </form>
  );
};
```

---

## 2. üìä –£–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 2.1 –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞

**–°–µ–π—á–∞—Å:** –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–µ—Ç—Ä–∏–∫–∏, –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–æ—Å—Ç—ã–º —Å–ø–∏—Å–∫–æ–º.

```typescript
// –¢–µ–∫—É—â–∏–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏
const { data: metric } = useMetricValue(metricId);
// metric.history - –º–∞—Å—Å–∏–≤ –∏–∑ 10 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –°–ª–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å, –∫—Ç–æ –∏ –∫–æ–≥–¥–∞ —á—Ç–æ –º–µ–Ω—è–ª
- –ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ç–∏–ø–∞–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ù–µ—É–¥–æ–±–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 2.2 –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ

#### A) –ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ "–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π"

```typescript
// –ù–æ–≤—ã–π —Ä–æ—É—Ç
// /metrics/history - –æ–±—â–∞—è –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –º–µ—Ç—Ä–∏–∫
// /metrics/:id/history - –∏—Å—Ç–æ—Ä–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–µ—Ç—Ä–∏–∫–∏

interface MetricHistoryFilters {
  metricId?: number;
  changeType?: MetricChangeType;
  dateFrom?: string;
  dateTo?: string;
  userId?: number;
}

const MetricHistoryPage: React.FC = () => {
  const [filters, setFilters] = useState<MetricHistoryFilters>({});
  const { data: history, isLoading } = useMetricHistory(filters);

  return (
    <div className="container mx-auto px-4 py-8">
      <div className="flex justify-between items-center mb-8">
        <h1 className="text-3xl font-bold">–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–µ—Ç—Ä–∏–∫</h1>
        <Button onClick={() => exportHistory(filters)}>
          <Download className="w-4 h-4 mr-2" />
          –≠–∫—Å–ø–æ—Ä—Ç
        </Button>
      </div>

      {/* –§–∏–ª—å—Ç—Ä—ã */}
      <HistoryFilters filters={filters} onChange={setFilters} />
      
      {/* –í—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π */}
      <HistoryTimeline history={history} />
    </div>
  );
};
```

#### B) –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–π —à–∫–∞–ª—ã

```typescript
const HistoryTimeline: React.FC<{ history: MetricHistory[] }> = ({ history }) => {
  const groupedByDate = groupBy(history, (item) => 
    format(new Date(item.changedAt), 'yyyy-MM-dd')
  );

  return (
    <div className="space-y-8">
      {Object.entries(groupedByDate).map(([date, items]) => (
        <div key={date} className="relative">
          {/* –î–∞—Ç–∞ */}
          <div className="flex items-center gap-4 mb-4">
            <div className="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">
              {format(new Date(date), 'dd MMMM yyyy', { locale: ru })}
            </div>
            <div className="flex-1 h-px bg-gray-200"></div>
          </div>
          
          {/* –°–æ–±—ã—Ç–∏—è –¥–Ω—è */}
          <div className="space-y-4 ml-4">
            {items.map((item) => (
              <HistoryItem key={item.id} item={item} />
            ))}
          </div>
        </div>
      ))}
    </div>
  );
};

const HistoryItem: React.FC<{ item: MetricHistory }> = ({ item }) => {
  const getChangeTypeIcon = (type: MetricChangeType) => {
    switch (type) {
      case MetricChangeType.CORRECTION:
        return <AlertTriangle className="w-4 h-4 text-red-500" />;
      case MetricChangeType.UPDATE:
        return <TrendingUp className="w-4 h-4 text-blue-500" />;
      case MetricChangeType.REVISION:
        return <Target className="w-4 h-4 text-green-500" />;
    }
  };

  const getChangeTypeColor = (type: MetricChangeType) => {
    switch (type) {
      case MetricChangeType.CORRECTION:
        return 'border-red-200 bg-red-50';
      case MetricChangeType.UPDATE:
        return 'border-blue-200 bg-blue-50';
      case MetricChangeType.REVISION:
        return 'border-green-200 bg-green-50';
    }
  };

  return (
    <div className={`border rounded-lg p-4 ${getChangeTypeColor(item.changeType)}`}>
      <div className="flex items-start justify-between">
        <div className="flex items-start gap-3">
          {getChangeTypeIcon(item.changeType)}
          <div>
            <h4 className="font-medium">{item.metricValue.metricDefinition.name}</h4>
            <p className="text-sm text-gray-600 mt-1">
              {format(new Date(item.changedAt), 'HH:mm')}
            </p>
          </div>
        </div>
        
        <div className="text-right">
          {/* –ü–æ–∫–∞–∑–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π */}
          {item.oldValue !== item.newValue && (
            <div className="text-sm">
              <span className="text-gray-500">–§–∞–∫—Ç:</span>
              <span className="text-red-600 line-through ml-1">
                {formatValue(item.oldValue, item.metricValue.metricDefinition.unit)}
              </span>
              <span className="text-green-600 ml-2">
                {formatValue(item.newValue, item.metricValue.metricDefinition.unit)}
              </span>
            </div>
          )}
          
          {item.oldTarget !== item.newTarget && (
            <div className="text-sm mt-1">
              <span className="text-gray-500">–ü–ª–∞–Ω:</span>
              <span className="text-red-600 line-through ml-1">
                {formatValue(item.oldTarget, item.metricValue.metricDefinition.unit)}
              </span>
              <span className="text-green-600 ml-2">
                {formatValue(item.newTarget, item.metricValue.metricDefinition.unit)}
              </span>
            </div>
          )}
        </div>
      </div>
      
      {item.changeReason && (
        <div className="mt-3 pt-3 border-t border-gray-200">
          <p className="text-sm text-gray-700">
            <strong>–ü—Ä–∏—á–∏–Ω–∞:</strong> {item.changeReason}
          </p>
        </div>
      )}
    </div>
  );
};
```

#### C) –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã

```typescript
const HistoryFilters: React.FC<{
  filters: MetricHistoryFilters;
  onChange: (filters: MetricHistoryFilters) => void;
}> = ({ filters, onChange }) => {
  const { data: metrics } = useMetricDefinitions();
  
  return (
    <Card className="mb-8">
      <CardHeader>
        <CardTitle className="flex items-center gap-2">
          <Filter className="w-5 h-5" />
          –§–∏–ª—å—Ç—Ä—ã
        </CardTitle>
      </CardHeader>
      <CardContent>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          {/* –í—ã–±–æ—Ä –º–µ—Ç—Ä–∏–∫–∏ */}
          <div>
            <Label>–ú–µ—Ç—Ä–∏–∫–∞</Label>
            <select
              value={filters.metricId || ''}
              onChange={(e) => onChange({ ...filters, metricId: e.target.value ? parseInt(e.target.value) : undefined })}
              className="w-full mt-1 rounded-md border border-gray-300 px-3 py-2"
            >
              <option value="">–í—Å–µ –º–µ—Ç—Ä–∏–∫–∏</option>
              {metrics?.map((metric) => (
                <option key={metric.id} value={metric.id}>
                  {metric.name}
                </option>
              ))}
            </select>
          </div>
          
          {/* –¢–∏–ø –∏–∑–º–µ–Ω–µ–Ω–∏—è */}
          <div>
            <Label>–¢–∏–ø –∏–∑–º–µ–Ω–µ–Ω–∏—è</Label>
            <select
              value={filters.changeType || ''}
              onChange={(e) => onChange({ ...filters, changeType: e.target.value as MetricChangeType || undefined })}
              className="w-full mt-1 rounded-md border border-gray-300 px-3 py-2"
            >
              <option value="">–í—Å–µ —Ç–∏–ø—ã</option>
              <option value={MetricChangeType.CORRECTION}>üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è</option>
              <option value={MetricChangeType.UPDATE}>üìä –û–±–Ω–æ–≤–ª–µ–Ω–∏—è</option>
              <option value={MetricChangeType.REVISION}>üéØ –ü–µ—Ä–µ—Å–º–æ—Ç—Ä—ã</option>
            </select>
          </div>
          
          {/* –ü–µ—Ä–∏–æ–¥ */}
          <div>
            <Label>–° –¥–∞—Ç—ã</Label>
            <Input
              type="date"
              value={filters.dateFrom || ''}
              onChange={(e) => onChange({ ...filters, dateFrom: e.target.value || undefined })}
            />
          </div>
          
          <div>
            <Label>–ü–æ –¥–∞—Ç—É</Label>
            <Input
              type="date"
              value={filters.dateTo || ''}
              onChange={(e) => onChange({ ...filters, dateTo: e.target.value || undefined })}
            />
          </div>
        </div>
        
        {/* –ë—ã—Å—Ç—Ä—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã */}
        <div className="flex gap-2 mt-4">
          <Button
            variant="outline"
            size="sm"
            onClick={() => onChange({ ...filters, dateFrom: format(subDays(new Date(), 7), 'yyyy-MM-dd') })}
          >
            –ü–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π
          </Button>
          <Button
            variant="outline"
            size="sm"
            onClick={() => onChange({ ...filters, dateFrom: format(subDays(new Date(), 30), 'yyyy-MM-dd') })}
          >
            –ü–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü
          </Button>
          <Button
            variant="outline"
            size="sm"
            onClick={() => onChange({ changeType: MetricChangeType.CORRECTION })}
          >
            –¢–æ–ª—å–∫–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
          </Button>
        </div>
      </CardContent>
    </Card>
  );
};
```

---

## 3. üìÖ –£–ø—Ä–æ—â–µ–Ω–∏–µ —É–∫–∞–∑–∞–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∞

### 3.1 –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞

**–°–µ–π—á–∞—Å:** –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–µ—Ç—Ä–∏–∫–∏ –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å `periodStart` –∏ `periodEnd` - –¥–≤–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –¥–∞—Ç—ã.

```typescript
// –¢–µ–∫—É—â–∏–µ –ø–æ–ª—è
interface CreateMetricValueDto {
  periodType: MetricPeriodType;  // MONTHLY, QUARTERLY, etc.
  periodStart: string;           // "2025-01-01"
  periodEnd: string;             // "2025-01-31"
}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ò–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å: –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω MONTHLY, –∑–∞—á–µ–º —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–Ω–µ—Ü –º–µ—Å—è—Ü–∞?
- –û—à–∏–±–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã –¥–∞—Ç
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è periodType –∏ –¥–∞—Ç
- –ù–µ–∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –±–∏–∑–Ω–µ—Å-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### 3.2 –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ

#### A) –ù–æ–≤–∞—è –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

```sql
-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã metric_values
ALTER TABLE metric_values ADD COLUMN period_date DATE;
ALTER TABLE metric_values ADD COLUMN period_year INTEGER;
ALTER TABLE metric_values ADD COLUMN period_month INTEGER;
ALTER TABLE metric_values ADD COLUMN period_quarter INTEGER;

-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
CREATE INDEX idx_metric_values_period_date ON metric_values(period_date);
CREATE INDEX idx_metric_values_period_year_month ON metric_values(period_year, period_month);
```

#### B) –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ TypeScript —Ç–∏–ø—ã

```typescript
// –ù–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫–∏
export interface CreateMetricValueDto {
  metricDefinitionId: number;
  value?: number;
  targetValue?: number;
  periodType: MetricPeriodType;
  
  // –ù–æ–≤—ã–µ –ø–æ–ª—è –≤–º–µ—Å—Ç–æ periodStart/periodEnd
  periodDate?: string;     // –î–ª—è DAILY - –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –¥–∞—Ç–∞
  periodYear?: number;     // –î–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ - –≥–æ–¥
  periodMonth?: number;    // –î–ª—è MONTHLY, QUARTERLY - –º–µ—Å—è—Ü
  periodQuarter?: number;  // –î–ª—è QUARTERLY - –∫–≤–∞—Ä—Ç–∞–ª (1-4)
  
  notes?: string;
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Ç–∏–ø –¥–ª—è UI
export interface MetricPeriodInput {
  type: MetricPeriodType;
  date?: Date;        // –î–ª—è DAILY
  month?: number;     // –î–ª—è MONTHLY (1-12)
  quarter?: number;   // –î–ª—è QUARTERLY (1-4)
  year: number;       // –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –≤—Å–µ—Ö
}
```

#### C) –£–º–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–±–æ—Ä–∞ –ø–µ—Ä–∏–æ–¥–∞

```typescript
const PeriodSelector: React.FC<{
  value: MetricPeriodInput;
  onChange: (period: MetricPeriodInput) => void;
}> = ({ value, onChange }) => {
  const currentYear = new Date().getFullYear();
  const currentMonth = new Date().getMonth() + 1;
  
  const handleTypeChange = (type: MetricPeriodType) => {
    const newValue: MetricPeriodInput = {
      type,
      year: value.year || currentYear,
    };
    
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–∑—É–º–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    switch (type) {
      case MetricPeriodType.MONTHLY:
        newValue.month = value.month || currentMonth;
        break;
      case MetricPeriodType.QUARTERLY:
        newValue.quarter = value.quarter || Math.ceil(currentMonth / 3);
        break;
      case MetricPeriodType.DAILY:
        newValue.date = value.date || new Date();
        break;
    }
    
    onChange(newValue);
  };

  return (
    <Card>
      <CardHeader>
        <CardTitle>–ü–µ—Ä–∏–æ–¥ –º–µ—Ç—Ä–∏–∫–∏</CardTitle>
      </CardHeader>
      <CardContent className="space-y-4">
        {/* –í—ã–±–æ—Ä —Ç–∏–ø–∞ –ø–µ—Ä–∏–æ–¥–∞ */}
        <div>
          <Label>–¢–∏–ø –ø–µ—Ä–∏–æ–¥–∞</Label>
          <div className="grid grid-cols-2 md:grid-cols-5 gap-2 mt-2">
            {Object.values(MetricPeriodType).map((type) => (
              <Button
                key={type}
                variant={value.type === type ? "default" : "outline"}
                size="sm"
                onClick={() => handleTypeChange(type)}
                className="text-xs"
              >
                {getPeriodTypeName(type)}
              </Button>
            ))}
          </div>
        </div>
        
        {/* –£—Å–ª–æ–≤–Ω—ã–µ –ø–æ–ª—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ */}
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          {/* –ì–æ–¥ - –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º */}
          <div>
            <Label>–ì–æ–¥</Label>
            <select
              value={value.year}
              onChange={(e) => onChange({ ...value, year: parseInt(e.target.value) })}
              className="w-full mt-1 rounded-md border border-gray-300 px-3 py-2"
            >
              {Array.from({ length: 10 }, (_, i) => currentYear - 5 + i).map(year => (
                <option key={year} value={year}>{year}</option>
              ))}
            </select>
          </div>
          
          {/* –ú–µ—Å—è—Ü - –¥–ª—è MONTHLY */}
          {value.type === MetricPeriodType.MONTHLY && (
            <div>
              <Label>–ú–µ—Å—è—Ü</Label>
              <select
                value={value.month || ''}
                onChange={(e) => onChange({ ...value, month: parseInt(e.target.value) })}
                className="w-full mt-1 rounded-md border border-gray-300 px-3 py-2"
              >
                {Array.from({ length: 12 }, (_, i) => i + 1).map(month => (
                  <option key={month} value={month}>
                    {format(new Date(2000, month - 1), 'LLLL', { locale: ru })}
                  </option>
                ))}
              </select>
            </div>
          )}
          
          {/* –ö–≤–∞—Ä—Ç–∞–ª - –¥–ª—è QUARTERLY */}
          {value.type === MetricPeriodType.QUARTERLY && (
            <div>
              <Label>–ö–≤–∞—Ä—Ç–∞–ª</Label>
              <div className="grid grid-cols-4 gap-1 mt-1">
                {[1, 2, 3, 4].map(quarter => (
                  <Button
                    key={quarter}
                    variant={value.quarter === quarter ? "default" : "outline"}
                    size="sm"
                    onClick={() => onChange({ ...value, quarter })}
                  >
                    Q{quarter}
                  </Button>
                ))}
              </div>
            </div>
          )}
          
          {/* –î–∞—Ç–∞ - –¥–ª—è DAILY */}
          {value.type === MetricPeriodType.DAILY && (
            <div>
              <Label>–î–∞—Ç–∞</Label>
              <Input
                type="date"
                value={value.date ? format(value.date, 'yyyy-MM-dd') : ''}
                onChange={(e) => onChange({ ...value, date: new Date(e.target.value) })}
              />
            </div>
          )}
        </div>
        
        {/* –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–µ—Ä–∏–æ–¥–∞ */}
        <div className="bg-blue-50 border border-blue-200 rounded-lg p-3">
          <div className="flex items-center gap-2">
            <Calendar className="w-4 h-4 text-blue-600" />
            <span className="text-sm font-medium text-blue-800">
              –ü–µ—Ä–∏–æ–¥: {formatPeriodPreview(value)}
            </span>
          </div>
        </div>
      </CardContent>
    </Card>
  );
};

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∞
const formatPeriodPreview = (period: MetricPeriodInput): string => {
  switch (period.type) {
    case MetricPeriodType.DAILY:
      return period.date ? format(period.date, 'dd MMMM yyyy', { locale: ru }) : '–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É';
    case MetricPeriodType.MONTHLY:
      return period.month 
        ? `${format(new Date(period.year, period.month - 1), 'LLLL yyyy', { locale: ru })}`
        : '–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—è—Ü';
    case MetricPeriodType.QUARTERLY:
      return period.quarter 
        ? `${period.quarter} –∫–≤–∞—Ä—Ç–∞–ª ${period.year}`
        : '–í—ã–±–µ—Ä–∏—Ç–µ –∫–≤–∞—Ä—Ç–∞–ª';
    case MetricPeriodType.YEARLY:
      return `${period.year} –≥–æ–¥`;
    default:
      return '–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥';
  }
};
```

#### D) –°–µ—Ä–≤–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ –¥–∞—Ç

```typescript
// –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–µ—Ä–∏–æ–¥–∞–º–∏
export class MetricPeriodService {
  static calculatePeriodDates(input: MetricPeriodInput): { start: Date; end: Date } {
    const { type, year, month, quarter, date } = input;
    
    switch (type) {
      case MetricPeriodType.DAILY:
        if (!date) throw new Error('Date is required for daily period');
        return {
          start: startOfDay(date),
          end: endOfDay(date)
        };
        
      case MetricPeriodType.MONTHLY:
        if (!month) throw new Error('Month is required for monthly period');
        const monthStart = new Date(year, month - 1, 1);
        return {
          start: startOfMonth(monthStart),
          end: endOfMonth(monthStart)
        };
        
      case MetricPeriodType.QUARTERLY:
        if (!quarter) throw new Error('Quarter is required for quarterly period');
        const quarterStart = new Date(year, (quarter - 1) * 3, 1);
        return {
          start: startOfQuarter(quarterStart),
          end: endOfQuarter(quarterStart)
        };
        
      case MetricPeriodType.YEARLY:
        const yearStart = new Date(year, 0, 1);
        return {
          start: startOfYear(yearStart),
          end: endOfYear(yearStart)
        };
        
      default:
        throw new Error(`Unsupported period type: ${type}`);
    }
  }
  
  static validatePeriodInput(input: MetricPeriodInput): string[] {
    const errors: string[] = [];
    
    if (!input.year || input.year < 2000 || input.year > 2100) {
      errors.push('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≥–æ–¥');
    }
    
    switch (input.type) {
      case MetricPeriodType.MONTHLY:
        if (!input.month || input.month < 1 || input.month > 12) {
          errors.push('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –º–µ—Å—è—Ü');
        }
        break;
        
      case MetricPeriodType.QUARTERLY:
        if (!input.quarter || input.quarter < 1 || input.quarter > 4) {
          errors.push('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∫–≤–∞—Ä—Ç–∞–ª');
        }
        break;
        
      case MetricPeriodType.DAILY:
        if (!input.date) {
          errors.push('–ù–µ —É–∫–∞–∑–∞–Ω–∞ –¥–∞—Ç–∞');
        }
        break;
    }
    
    return errors;
  }
}

// –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫–∏
async createMetricValue(userId: number, createDto: CreateMetricValueDto) {
  // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –≤ —Å—Ç–∞—Ä—ã–π –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
  const periodInput: MetricPeriodInput = {
    type: createDto.periodType,
    year: createDto.periodYear!,
    month: createDto.periodMonth,
    quarter: createDto.periodQuarter,
    date: createDto.periodDate ? new Date(createDto.periodDate) : undefined,
  };
  
  // –í–∞–ª–∏–¥–∞—Ü–∏—è
  const errors = MetricPeriodService.validatePeriodInput(periodInput);
  if (errors.length > 0) {
    throw new BadRequestException(`–û—à–∏–±–∫–∏ –≤ –ø–µ—Ä–∏–æ–¥–µ: ${errors.join(', ')}`);
  }
  
  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –¥–∞—Ç
  const { start, end } = MetricPeriodService.calculatePeriodDates(periodInput);
  
  return this.prisma.metricValue.create({
    data: {
      ...createDto,
      periodStart: start,
      periodEnd: end,
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–∞–∫–∂–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
      periodDate: periodInput.date,
      periodYear: periodInput.year,
      periodMonth: periodInput.month,
      periodQuarter: periodInput.quarter,
      userId,
    },
    include: {
      metricDefinition: true,
    },
  });
}
```

---

## 4. üìã –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 4.1 –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (1 –Ω–µ–¥–µ–ª—è)

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –≤ –ë–î
- [ ] –û–±–Ω–æ–≤–∏—Ç—å Prisma —Å—Ö–µ–º—É
- [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ TypeScript —Ç–∏–ø—ã
- [ ] –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–µ—Ä–∏–æ–¥–∞–º–∏

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `prisma/migrations/` - –Ω–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
- `prisma/schema.prisma` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
- `src/entities/metrics/model/types.ts` - –Ω–æ–≤—ã–µ —Ç–∏–ø—ã
- `src/server/metrics/services/period.service.ts` - –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å

### 4.2 –≠—Ç–∞–ø 2: –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å (1 –Ω–µ–¥–µ–ª—è)

**–ó–∞–¥–∞—á–∏:**
- [ ] –û–±–Ω–æ–≤–∏—Ç—å DTO –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ç–∏–ø–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å–µ—Ä–≤–∏—Å–µ
- [ ] –°–æ–∑–¥–∞—Ç—å API –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `src/metrics/dto/` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ DTO
- `src/metrics/metrics.service.ts` - –Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
- `src/metrics/metrics.controller.ts` - –Ω–æ–≤—ã–µ endpoints

### 4.3 –≠—Ç–∞–ø 3: –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å (2 –Ω–µ–¥–µ–ª–∏)

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Ñ–æ—Ä–º—ã —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–±–æ—Ä–∞ –ø–µ—Ä–∏–æ–¥–∞
- [ ] –û–±–Ω–æ–≤–∏—Ç—å API —Ö—É–∫–∏

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `src/features/metrics-management/` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º
- `src/pages/metrics/` - –Ω–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `src/entities/metrics/api/` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ API
- `src/components/` - –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 4.4 –≠—Ç–∞–ø 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∞ (1 –Ω–µ–¥–µ–ª—è)

**–ó–∞–¥–∞—á–∏:**
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏
- [ ] –ü—Ä–æ–≤–µ—Å—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UX —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- [ ] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

---

## 5. üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### 5.1 –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ:**
- –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫–∏: —Å 3-5 –º–∏–Ω—É—Ç –¥–æ 1-2 –º–∏–Ω—É—Ç
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –≤–≤–æ–¥–µ –ø–µ—Ä–∏–æ–¥–æ–≤: —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞ 80%
- –í—Ä–µ–º—è –ø–æ–∏—Å–∫–∞ –≤ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π: —Å 2-3 –º–∏–Ω—É—Ç –¥–æ 30 —Å–µ–∫—É–Ω–¥
- –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: –ø–æ–≤—ã—à–µ–Ω–∏–µ —Å 6/10 –¥–æ 8/10

**–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ:**
- –ß–µ—Ç–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –£–¥–æ–±–Ω—ã–π –∞—É–¥–∏—Ç –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–µ—Ç—Ä–∏–∫
- –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –≤–≤–æ–¥ –ø–µ—Ä–∏–æ–¥–æ–≤
- –°–Ω–∏–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É

### 5.2 –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

**–†–∏—Å–∫ 1: –°–ª–æ–∂–Ω–æ—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö**
- *–ú–∏—Ç–∏–≥–∞—Ü–∏—è:* –ü–æ—ç—Ç–∞–ø–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—Ç–∞—Ä—ã—Ö –ø–æ–ª–µ–π
- *–ü–ª–∞–Ω –ë:* Rollback –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏

**–†–∏—Å–∫ 2: –°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑–º–µ–Ω–µ–Ω–∏—è–º**
- *–ú–∏—Ç–∏–≥–∞—Ü–∏—è:* –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ —Å –æ–±—É—á–µ–Ω–∏–µ–º
- *–ü–ª–∞–Ω –ë:* –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ —Å—Ç–∞—Ä—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**–†–∏—Å–∫ 3: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∏—Å—Ç–æ—Ä–∏–∏**
- *–ú–∏—Ç–∏–≥–∞—Ü–∏—è:* –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏ –∏–Ω–¥–µ–∫—Å—ã –≤ –ë–î
- *–ü–ª–∞–Ω –ë:* –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π

---

## 6. üí° –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—Å—è—Ç —É–¥–æ–±—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –º–µ—Ç—Ä–∏–∫:

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–∏–π** —Å–¥–µ–ª–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –±–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω–æ–π –∏ —É–ª—É—á—à–∏—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
2. **–£–¥–æ–±–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π** –æ–±–µ—Å–ø–µ—á–∏—Ç –ø–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –¥–∞–Ω–Ω—ã–º–∏
3. **–£–ø—Ä–æ—â–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤** —É—Å–∫–æ—Ä–∏—Ç –≤–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–Ω–∏–∑–∏—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã —Å —É—á–µ—Ç–æ–º –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –≤–Ω–µ–¥—Ä–µ–Ω—ã –ø–æ—ç—Ç–∞–ø–Ω–æ –±–µ–∑ –Ω–∞—Ä—É—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º—ã.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ù–∞—á–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Å —É–ø—Ä–æ—â–µ–Ω–∏—è –ø–µ—Ä–∏–æ–¥–æ–≤ (–Ω–∞–∏–±–æ–ª—å—à–∏–π —ç—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö —Ä–∏—Å–∫–∞—Ö), –∑–∞—Ç–µ–º –¥–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π, –∏ –≤ –ø–æ—Å–ª–µ–¥–Ω—é—é –æ—á–µ—Ä–µ–¥—å - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π.

---

**–ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ:** –ö–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ TaskFlow Club  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –û–±—Å—É–∂–¥–µ–Ω–∏–µ —Å –∫–æ–º–∞–Ω–¥–æ–π –∏ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏